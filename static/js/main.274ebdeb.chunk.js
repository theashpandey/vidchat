(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{55:function(e,n,t){},87:function(e,n,t){},92:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t.n(c),o=t(47),i=t.n(o),u=(t(55),t(49)),a=t(2),s=t(94),d=t(1),f=function(e){return Object(d.jsx)("button",{className:"Appbtnn",onClick:function(){var n=Object(s.a)();e.history.push("/room/".concat(n))},children:"Create Room"})},l=t(48),j=t.n(l),h=function(e){var n=Object(c.useRef)(),t=Object(c.useRef)(),r=Object(c.useRef)(),o=Object(c.useRef)(),i=Object(c.useRef)(),u=Object(c.useRef)();function a(e){var n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]});return n.onicecandidate=l,n.ontrack=p,n.onnegotiationneeded=function(){return function(e){r.current.createOffer().then((function(e){return r.current.setLocalDescription(e)})).then((function(){var n={target:e,caller:o.current.id,sdp:r.current.localDescription};o.current.emit("offer",n)})).catch((function(e){return console.log(e)}))}(e)},n}function s(e){r.current=a();var n=new RTCSessionDescription(e.sdp);r.current.setRemoteDescription(n).then((function(){u.current.getTracks().forEach((function(e){return r.current.addTrack(e,u.current)}))})).then((function(){return r.current.createAnswer()})).then((function(e){return r.current.setLocalDescription(e)})).then((function(){var n={target:e.caller,caller:o.current.id,sdp:r.current.localDescription};o.current.emit("answer",n)}))}function f(e){var n=new RTCSessionDescription(e.sdp);r.current.setRemoteDescription(n).catch((function(e){return console.log(e)}))}function l(e){if(e.candidate){var n={target:i.current,candidate:e.candidate};o.current.emit("ice-candidate",n)}}function h(e){var n=new RTCIceCandidate(e);r.current.addIceCandidate(n).catch((function(e){return console.log(e)}))}function p(e){t.current.srcObject=e.streams[0]}return Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(t){n.current.srcObject=t,u.current=t,o.current=j.a.connect("/"),o.current.emit("join room",e.match.params.roomID),o.current.on("other user",(function(e){!function(e){r.current=a(e),u.current.getTracks().forEach((function(e){return r.current.addTrack(e,u.current)}))}(e),i.current=e})),o.current.on("user joined",(function(e){i.current=e})),o.current.on("offer",s),o.current.on("answer",f),o.current.on("ice-candidate",h)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"Appmn",children:[Object(d.jsx)("h2",{children:"Local User"}),Object(d.jsx)("video",{autoPlay:!0,ref:n})]}),Object(d.jsxs)("div",{className:"Appmmn",children:[Object(d.jsx)("h2",{children:"Remote User"}),Object(d.jsx)("video",{autoPlay:!0,ref:t})]})]})};t(87);var p=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(u.a,{children:[Object(d.jsx)("h1",{className:"Apphe",children:"VidChaT"}),Object(d.jsxs)(a.c,{children:[Object(d.jsx)(a.a,{path:"/",exact:!0,component:f}),Object(d.jsx)(a.a,{path:"/room/:roomID",component:h})]}),Object(d.jsxs)("p",{className:"Appp",children:["Project By-  ",Object(d.jsx)("a",{href:"https://github.com/theashpandey",children:" Ash Pandey"})," "]})]})})},b=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,95)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),o(e),i(e)}))};i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(p,{})}),document.getElementById("root")),b()}},[[92,1,2]]]);
//# sourceMappingURL=main.274ebdeb.chunk.js.map